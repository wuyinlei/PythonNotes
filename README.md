# python学习笔记

标签（空格分隔）： python

---
### python特性概要
* 1、python是解释型语言
* 2、python特性总结:字节码、动态、缩进
    * 2.1 字节码
    * 2.2 动态语义 在赋值的时候确定数据类型
    * 2.3 缩进
* 3、python之禅


    
#### 脚本解释性语言的内部机制
* 在运行脚本之前,得到结果之后
    * 1、python先将脚本编译成字节码  文件(pyc,pyo)
    * 2、python虚拟机解释并运行字节码文件

#### 编译型语言的内部机制
* 1、先将源代码编译成机器码(机器能读懂的代码),生成可执行文件
* 2、运行可执行文件
    

#### 一些标准
```
#coding=utf-8    编码格式
#上面其实随便怎么写都可以 只要符合coding[:=]\s*([-\w.]+)
#比如这种卖萌写法： # -*- coding: utf-8 -*-

"这是一个标准脚本的写作范式,此处为该脚本文档。"  (这里使用""括起来)

#这里给下面语句做一个注释
new_str = "这是一个全局变量"  #这样写注释也是可以的

def hello():
    """
    这是一个函数定义的多行注释
    继续多行

    """
    return "hello world"
    
#程序主体
if __name__ == "__main__":
    print hello()

```

#### 对变量、对象与赋值的浅析
* 1、不记住就完蛋了
    * 1.1：一切数据都是对象
    * 1.2：一切变量都输对数据对象的一个引用
    * 1.3：python内部的引用计数。sys.getrefcount
* 2、变量命名规范
    * 2.1 记住只能做什么。用字母和_开头
    * 2.2 记住不能做什么。不能用关键字
    * 2.3 怎么搭配最合理：文件名小写、变量小写、函数名小写。_让变量更清楚
    * 2.4 大小写敏感

#### 格式化输入/出
|字符|输出格式|
|:-:|:-:|
|d,i|十进制整数或者长整数|
|u|无符号整数或长整数|
|o|八进制整数或长整数|
|x|十六进制整数或长整数|
|X|十六进制整数(大写字母)|
|f|浮点数,如[-]m.dddddd|
|e|浮点数,如[-]m.dddddde+xx| 
|E|浮点数,如[-]m.ddddddE+xx|
|g,G|指数小于-4或者更高精度时试用%e或者%E,否则试用%f|
|s|煮饭吃或任意对象,格式化代码试用str()生成字符串|
|r|同repr()生成的字符串|
|c|单个字符|
|%|字面量%|

#### 函数的创建与调用
* 函数是实现模块化编程的基本组件
* Python试用def语句定义函数
* 函数可以参数化,通过传递不同的参数来调用
* 每个Python函数都有一个返回值,默认为None,也可以使用"return value"明确定义返回值
* def语句会创建一个函数对象,并同时创建一个指向函数对象的引用
    * 函数也是对象,可以存储在组合数据类型中,也可以作为参数传递给其他函数
    * callable()可用于测试函数是否可调用
    
    ```
    #定义一个打印函数
    >>> def printName(name):
            print name    
    
    #测试该函数是否可以使用
    >>> callable(printName)
    #返回true  表示可以使用
    true
    #执行这个函数
    >>> printName("Hello world")
    #控制台输出这个输入的参数
    Hello world
        
    ```
    
    ##### Python有众多内置函数
    * Python标准库拥有众多内置模块,这些模块拥有大量函数
        * Python模块实际上就是包含Python代码的.py文件,其拥有自定义的函数与类及变量等
        * 导入模块使用import语句进行,后跟模块名称(不能指定模块文件的后缀.py)
        * 导入一个模块后,可以访问其内部包含的任意函数
        
        ```
        >>> import random
        >>> x = random.choice(['a','b','c','d','e','f','g'])
        >>> print x
        d
        ```
        
    #### 语句和语法
    * 注释
        * #:可以从一行的任何地方开始
    * 续行
        * \:
        * ''':闭合操作符,单一语句跨多行
    * 代码组
        * 缩进相同的一组语句构成的一个代码块
        * 首行以关键字开始,如if/while等,以冒号结束
        * Python使用缩进来分隔代码组,同一代码组的代码行必须对其,否则会造成语法错误

    * 同一行放置多个语句
        * ;:以分号作为分隔符
    * 模块
        * 每一个Python脚本文件都可以被当成一个模块
        * 模块里的代码可以是一段直接执行的脚本,也可以是一些类似函数的代码从而可由别的模块执行导入(import)
        
    #### Python命名惯例
    * 以单一下划线开头的变量名(_x)不会被from module import* 语句导入
    * 前后有下划线的变量名(__x__)是系统变量名,对解释器有特殊意义
    * 以两个下划线开头,但是结尾没有下划线的变量名(__x)是类的本地变量
    * 交互模式下,只有单个下划线的变量名(_)用于保存最后表达式的结果
    
#### Python文件结构
```
#/usr/bin/env python    （1）起始行

"this is a test module"  (2) 模块文档(文档字符串)

import sys 
import os                (3)模块导入

debug = True             (4)（全局）变量定义

class FooClass(object):
    "Foo class"
    pass                  （5）类定义(如果有的话)
    
def test():
    "test function"
    foo = FooClass()
    if debug:
        print 'ran test()'    (6) 函数定义(如果有的话)
        
if __name__ = '__main__':
    test()                     (7)主程序
```

* 主程序
    * 无论当前模块是被别的模块导入还是作为脚本直接执行,都会执行这部分代码
* 注意:所有的模块都有能力执行代码
    * 最高级别的Python语句(没有缩进的)在模块被导入时候就会执行,无论是否真的需要执行
    * 妥当的做法:除了那些真正需要执行的代码以外,所有的功能代码都通过函数建立,因此
        * 仅在主程序模块中编写大量的顶级可执行代码
        * 用于被导入的模块只应该存在较少的顶级执行代码
* __name__指示模块应该如何被加载
    * 如果模块是被导入,__name__的值是模块名字
    * 如果模块是直接执行,__name__的值是'__main__'
    
#### 核心数据类型
* 数字:int long float complex bool
* 字符:str unicode
* 列表:list
* 字典:dist
* 元组:tuple
* 文件:file
* 其他类型:集合(set)、frozenset、类类型、None

##### 类型转换
```
str()  repr() 或者format():将非字符型数据转换为字符
int():转换为整数
float():转换为float类型

list(s):将字符串s转换为列表
tuple(s):将字符串s转换为元祖
set(s):将字符串转换为集合
frozenset(s):将字符串s转换为不可变集合
dict(d):创建字典,其中d必须是(key,value)的元组序列

chr(x):将整数转换为字符
ord(x):将字符转换为整数值
hex(x):将整数转换为十六进制字符
```

#### Python对象的相关术语
* 程序中存储的所有数据都是对象
* 每个对象都有一个**身份**、一个**类型**和一个**值**
    * 例如，`school=“MaGe Linux” `创建一个字符串对象,其身份是指向它在内存中所处位置的指针(其在内存中的地址),而school就是引用这个具体位置的名称
* 对象的类型也称对象的类别,用于描述对象的内部表示及塔支持的方法和操作
* 创建特定类型的对象时候,有时也将该对象称为该类型的实例
* 实例被创建后,其身份和类型就不可改变
    * 如对象值是可以修改的,则称为**可变对象**
    * 如果对象的值是不可以修改的,则称为**不可变对象**
* 如果某个对象包含对其他对象的引用,则将其称为容器
* 大多数对象都拥有大量特有的数据属性和方法
    * 属性:与对象相关的值
    * 方法:被调用时候将在对象上执行某些操作的函数
    * 使用点(.)运算符可以访问属性和方法

#### 对象的身份和类型
* Python内置函数id()可返回一个对象的身份,即改对象在内存中的位置
    * is运算符可用于比较两个对象的身份
    * type()用于返回一个对象的类型
    * 对象类型本身也是一个对象,称为对象的类
        * 该对象的定义是唯一的,且对于某类型的所有实例都是相同的
        * 所有类型对象都有一个指定的名称,可用于执行类型检查,如list、dist

        ```
            if a is b:
                statements
            if a == b:
                statements
            if type(a) is type(b):
                 statements

        ```

#### 容器、类型、对象
* 1、所有对象都有引用计数
* 2、列表和字典都支持两种类型的复制操作,浅复制和深复制:深复制可以使用copy模块中的deepcopy()实现
* 3、Python中的所有对象都是“第一类的”,这意味着使用标识符命名的所有对象都具有相同状态,于是能够命名所有对象都可以直接当数据进行处理
* 4、所有序列都支持迭代
* 5、所有序列都支持的操作和方法

    ```
    s[i]
    s[i:j]
    s[i:j:stride]
    len(s)
    min(s)
    max(s)
    sum(s)
    all(s)
    any(s)
    s1+s2:连接
    s1*N:重复
    obj in s1:成员关系判断
    obj not in s1:
    ```
* 6、可变序列的操作:

    ```
    s1[index] = value :元素赋值
    s1[i:j] = t :切片赋值
    del s1[index]
    del s1[i:j]
    del s1[i:j:stride]
    ```
#### Python的表达式和语句

##### Python中的常用的表达式操作符
```
x+y   x-y
x*y  x/y  x//y   x%y

逻辑运算
x or y    x and y   not x

成员关系运算
x in y  x not in y

对象实例测试
x is y    x not is y

比较运算
x < y   x > y  x <= y    x >= y  x != y   x == y

位运算
x | y   x & y   x ^ y    x << y   x >> y

一元运算
-x   +x   ~x

幂运算
x ** y

索引和分片
x[i]  x[i:j] x[i:j:stride]

调用
x(...)

取属性
    x.attribute

元组:(...)

序列:[...]

字典:{...}

三元选择表达式: x if y else z


运算符优先级
    (...)、[...]、{...}
    s[i] 、 s[i:j]
    s.attribute
    s(...)
    +x   -x   ~x
    x ** y
    *  /  //  %
    +   -
    <<    >>
    &
    ^
    |
    <   <=   >  >=   ==  !=

语句:
    赋值语句
    调用
    print   打印对象
    if / elif / else  条件判断
    for / else  序列迭代
    while / else 普通循环
    pass 占位符
    break
    continue
    def
    return
    yield
    global  命名空间
    raise  触发异常
    import
    from   模块属性访问
    class 类
    try  /  except  / finally  捕捉异常
    del   删除引用
    assert   调试检查
    with / as  环境管理器

赋值语句:

```

#### 编写循环的技巧
* for循环比while循环执行速度快
* Python提供了两个内置函数,用于在for循环中定制特殊的循环
    * range和xrange
        * range:一次性地返回连续的整数列表
        * xrange:一次产生一个数据元素,相较于range更节约空间

    * zip
        * 返回并行的元素元组的列表,常用于在for循环中遍历整个序列

* 增加对象的引用计数场景:
    * 对象创建的时候
    * 将对象添加进容器时候,类似list.append()
    * 当对象被当做参数传递给函数时候
    * 为对象创建另外变量名

* 减少引用计数
    * 引用次对象的某变量名被显式销毁 del x
    * 给引用次对象的某变量名重新赋值
    * 从容器中移除对象类似   list.pop()
    * 容器本身被销毁

